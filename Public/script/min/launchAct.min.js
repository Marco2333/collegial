function getObjectURL(e){var t=null;return void 0!=window.createObjectURL?t=window.createObjectURL(e):void 0!=window.URL?t=window.URL.createObjectURL(e):void 0!=window.webkitURL&&(t=window.webkitURL.createObjectURL(e)),t}function setPickerStyle(e,t){var i=$(".dpicker-body").eq(t).scrollTop(),a=parseInt(i/38);if(a===e)return e;var r=$(".dpicker-body").eq(t).find(".dpicker-item");return $(r[a+1]).hasClass("empty")?a:(r=$(".dpicker-body").eq(t).find(".dpicker-item").removeClass("active").removeClass("sub-active"),$(r[a+1]).addClass("active").prev().addClass("sub-active").next().next().addClass("sub-active"),a)}function isLeapYear(e){return!isNaN(parseInt(e))&&(e%4==0&&e%100!=0||e%400==0)}function check(){return $("input[name='name']").val().trim()?$("input[name='location']").val().trim()?$("textarea[name='intro']").val().trim()?"未设置"===$("input[name='starttime']").val().trim()?(alert("开始时间不能为空！"),!1):"未设置"!==$("input[name='endtime']").val().trim()||(alert("结束时间不能为空！"),!1):(alert("活动介绍不能为空！"),!1):(alert("活动地点不能为空！"),!1):(alert("活动名称不能为空！"),!1)}$(function(){var e=$(".info-mask").attr("data-status");"1"!==e&&"-1"!==e||("1"===e?$(".info-mask").text("发起成功"):$(".info-mask").text("发起失败"),$(".info-mask").removeClass("none"),setTimeout(function(){$(".info-mask").addClass("none")},1500));var t=0,i=0,a=0,r=0,n=[1,3,5,7,8,10,12];$(".dpicker-body").scrollTop("9"),$(".dpicker-body").eq(0).scroll(function(){if(t=setPickerStyle(t,0),"2"==$(".dpicker-item.active").eq(1).text()){var e=$(".dpicker-body").eq(2).find(".dpicker-item");isLeapYear($(".dpicker-item.active").eq(0).text())?e.eq(28).removeClass("none"):e.eq(28).addClass("none")}}),$(".dpicker-body").eq(1).scroll(function(){i=setPickerStyle(i,1);var e=$(".dpicker-body").eq(2).find(".dpicker-item");n.indexOf(1+i)==-1?(e.eq(30).addClass("none"),1==i&&(e.eq(29).addClass("none"),isLeapYear($(".dpicker-item.active").eq(0).text())||e.eq(28).addClass("none"))):e.removeClass("none")}),$(".dpicker-body").eq(2).scroll(function(){a=setPickerStyle(a,2)}),$(".dpicker-finish").click(function(){var e=$(".dpicker-item.active"),t=e.eq(0).text()+" 年 "+e.eq(1).text()+" 月 "+e.eq(2).text()+" 日 ";$(".date-picker").css({bottom:"-17.5rem"}),$(".show-dpicker input").eq(+r).val(t)}),$(".dpicker-cancel").click(function(){$(".date-picker").css({bottom:"-17.5rem"})}),$(".show-dpicker").click(function(){r=$(this).attr("data-id"),$(".date-picker").css({bottom:0})}),setPickerStyle(0),$("#club-logo-set").prev("input").change(function(){var e=$(this).val(),t=e.substring(e.lastIndexOf(".")+1);if(["jpg","png","gif","jpeg","bmp"].indexOf(t.toLowerCase())==-1)return alert("请上传图片文件！"),void $(this).val("");var i=getObjectURL(this.files[0]);i&&$("#club-logo-set").attr("src",i)});var c=!0;$(".album-add").on("change","input[type='file']",function(){var e,t=$(this).val(),i=t.substring(t.lastIndexOf(".")+1);return["jpg","png","gif","jpeg","bmp"].indexOf(i.toLowerCase())==-1?(alert("请上传图片文件！"),void $(this).val("")):(e=getObjectURL(this.files[0]),$("<img>").attr("src",e).prependTo($(".club-add-img")),$(this).after($("<input type='file' name='album[]'>")),void(c&&(c=!1,$(".club-add-img img").last().attr("src","../../../Public/images/add_picture.png"))))}),$(".club-add-img").on("click","img:last-child",function(){$(".album-add input:last-of-type").trigger("click")})});